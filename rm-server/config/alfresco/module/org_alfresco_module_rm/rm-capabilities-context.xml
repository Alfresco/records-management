<?xml version='1.0' encoding='UTF-8'?>
<!DOCTYPE beans PUBLIC '-//SPRING//DTD BEAN//EN' 'http://www.springframework.org/dtd/spring-beans.dtd'>

<!-- The beans that implement RM capabilities -->

<beans>

   <!-- Capability Conditions -->
   <import resource="classpath:alfresco/module/org_alfresco_module_rm/capability/rm-capabilities-condition-context.xml"/>

   <!--  Capability beans -->

   <bean id="rmBaseCapability"
      abstract="true"
      parent="RMSecurityCommon"
      init-method="init">
      <property name="voter" ref="rmEntryVoter"/>
      <property name="capabilityService" ref="CapabilityService"/>
   </bean>

   <bean id="declarativeCapability"
      abstract="true"
      parent="rmBaseCapability"
      class="org.alfresco.module.org_alfresco_module_rm.capability.declarative.DeclarativeCapability"/>

   <bean id="compositeCapability"
      abstract="true"
      parent="rmBaseCapability"
      class="org.alfresco.module.org_alfresco_module_rm.capability.declarative.CompositeCapability" />

   <bean id="rmAddModifyEventDatesCapability"
      parent="declarativeCapability">
      <property name="name" value="AddModifyEventDates"/>
      <property name="permission" value="AddModifyEventDates"/>
      <property name="kinds">
         <list>
            <value>RECORD_FOLDER</value>
            <value>RECORD</value>
         </list>
      </property>
      <property name="conditions">
         <map>
            <entry key="capabilityCondition.filling" value="true"/>
            <entry key="capabilityCondition.frozen" value="false"/>
            <entry key="capabilityCondition.hasEvents" value="true"/>
         </map>
      </property>
      <property name="group"><ref bean="eventsGroup"/></property>
      <property name="index" value="10" />
   </bean>

   <bean id="rmAttachRulesToMetadataPropertiesCapability"
      parent="declarativeCapability">
      <property name="name" value="AttachRulesToMetadataProperties"/>
      <property name="permission" value="AttachRulesToMetadataProperties"/>
      <property name="group"><ref bean="filePlanMetadataListsAndEmailGroup"/></property>
      <property name="index" value="10" />
   </bean>

   <bean id="rmChangeOrDeleteReferencesCapability"
      parent="rmBaseCapability"
      class="org.alfresco.module.org_alfresco_module_rm.capability.impl.ChangeOrDeleteReferencesCapability">
      <property name="name" value="ChangeOrDeleteReferences"/>
      <property name="permission" value="ChangeOrDeleteReferences"/>
      <property name="conditions">
         <map>
            <entry key="capabilityCondition.filling" value="true"/>
            <entry key="capabilityCondition.frozen" value="false"/>
         </map>
      </property>
      <property name="group"><ref bean="referencesAndLinksGroup"/></property>
      <property name="index" value="10" />
   </bean>

   <bean id="rmCreateModifyDestroyClassificationGuidesCapability"
      parent="declarativeCapability">
      <property name="name" value="CreateModifyDestroyClassificationGuides"/>
      <property name="permission" value="CreateModifyDestroyClassificationGuides"/>
      <property name="group"><ref bean="classifiedRecordsGroup"/></property>
      <property name="index" value="10" />
   </bean>

   <bean id="rmCreateModifyDestroyEventsCapability"
      parent="declarativeCapability">
      <property name="name" value="CreateModifyDestroyEvents" />
      <property name="permission" value="CreateModifyDestroyEvents" />
      <property name="group"><ref bean="eventsGroup"/></property>
      <property name="index" value="20" />
   </bean>

   <bean id="rmCreateModifyDestroyFileplanTypesCapability"
      parent="declarativeCapability">
      <property name="name" value="CreateModifyDestroyFileplanTypes" />
      <property name="permission" value="CreateModifyDestroyFileplanTypes" />
      <property name="group"><ref bean="filePlanMetadataListsAndEmailGroup"/></property>
      <property name="index" value="40" />
   </bean>

   <bean id="rmCreateModifyDestroyRecordTypesCapability"
      parent="declarativeCapability">
      <property name="name" value="CreateModifyDestroyRecordTypes" />
      <property name="permission" value="CreateModifyDestroyRecordTypes" />
      <property name="group"><ref bean="filePlanMetadataListsAndEmailGroup"/></property>
      <property name="index" value="50" />
   </bean>

   <bean id="rmCreateModifyDestroyReferenceTypesCapability"
      parent="declarativeCapability">
      <property name="name" value="CreateModifyDestroyReferenceTypes" />
      <property name="permission" value="CreateModifyDestroyReferenceTypes" />
      <property name="group"><ref bean="filePlanMetadataListsAndEmailGroup"/></property>
      <property name="index" value="60" />
   </bean>

   <bean id="rmCreateModifyDestroyRolesCapability"
      parent="declarativeCapability">
      <property name="name" value="CreateModifyDestroyRoles" />
      <property name="permission" value="CreateModifyDestroyRoles" />
      <property name="group"><ref bean="rolesAndAccessRightsGroup"/></property>
      <property name="index" value="10" />
   </bean>

   <bean id="rmCreateModifyDestroyTimeframesCapability"
      parent="declarativeCapability">
      <property name="name" value="CreateModifyDestroyTimeframes" />
      <property name="permission" value="CreateModifyDestroyTimeframes" />
      <property name="group"><ref bean="classifiedRecordsGroup"/></property>
      <property name="index" value="20" />
   </bean>

   <bean id="rmCreateModifyDestroyUsersAndGroupsCapability"
      parent="declarativeCapability">
      <property name="name" value="CreateModifyDestroyUsersAndGroups" />
      <property name="permission" value="CreateModifyDestroyUsersAndGroups" />
      <property name="group"><ref bean="rolesAndAccessRightsGroup"/></property>
      <property name="index" value="20" />
   </bean>

   <bean id="rmCycleVitalRecordsCapability"
      parent="declarativeCapability">
      <property name="name" value="CycleVitalRecords"/>
      <property name="permission" value="CycleVitalRecords"/>
      <property name="kinds">
         <list>
            <value>RECORD_FOLDER</value>
            <value>RECORD</value>
         </list>
      </property>
      <property name="conditions">
         <map>
            <entry key="capabilityCondition.filling" value="true"/>
            <entry key="capabilityCondition.frozenOrFrozenChildren" value="false"/>
            <entry key="capabilityCondition.isTransferring" value="false" />
            <entry key="capabilityCondition.transferred" value="false"/>
            <entry key="capabilityCondition.destroyed" value="false"/>
            <entry key="capabilityCondition.vitalRecordOrFolder" value="true"/>
         </map>
      </property>
      <property name="group"><ref bean="vitalRecordsGroup"/></property>
      <property name="index" value="10" />
   </bean>

   <bean id="rmDeleteLinksCapability"
      parent="rmBaseCapability"
      class="org.alfresco.module.org_alfresco_module_rm.capability.impl.DeleteLinksCapability">
      <property name="name" value="DeleteLinks"/>
      <property name="permission" value="DeleteLinks"/>
      <property name="conditions">
         <map>
            <entry key="capabilityCondition.filling" value="true"/>
            <entry key="capabilityCondition.cutoff" value="false"/>
            <entry key="capabilityCondition.frozen" value="false"/>
         </map>
      </property>
      <property name="group"><ref bean="referencesAndLinksGroup"/></property>
      <property name="index" value="20" />
   </bean>

   <bean id="rmDisplayRightsReportCapability"
      parent="declarativeCapability">
      <property name="name" value="DisplayRightsReport" />
      <property name="permission" value="DisplayRightsReport" />
      <property name="group"><ref bean="rolesAndAccessRightsGroup"/></property>
      <property name="index" value="30" />
   </bean>

   <bean id="rmMakeOptionalPropertiesMandatoryCapability"
      parent="declarativeCapability">
      <property name="name" value="MakeOptionalParametersMandatory" />
      <property name="permission" value="MakeOptionalParametersMandatory" />
      <property name="group"><ref bean="filePlanMetadataListsAndEmailGroup"/></property>
      <property name="index" value="80" />
   </bean>

   <bean id="rmManageAccessControlsCapability"
      parent="declarativeCapability">
      <property name="name" value="ManageAccessControls" />
      <property name="permission" value="ManageAccessControls" />
      <property name="group"><ref bean="rolesAndAccessRightsGroup"/></property>
      <property name="index" value="40" />
   </bean>

   <bean id="rmManageAccessRightsCapability"
      parent="declarativeCapability">
      <property name="name" value="ManageAccessRights"/>
      <property name="permission" value="ManageAccessRights"/>
      <property name="conditions">
         <map>
            <entry key="capabilityCondition.frozen" value="false"/>
            <entry key="capabilityCondition.filling" value="true"/>
         </map>
      </property>
      <property name="group"><ref bean="rolesAndAccessRightsGroup"/></property>
      <property name="index" value="50" />
   </bean>

   <bean id="rmMapClassificationGuideMetadataCapability"
      parent="declarativeCapability">
      <property name="name" value="MapClassificationGuideMetadata" />
      <property name="permission" value="MapClassificationGuideMetadata" />
      <property name="group"><ref bean="classifiedRecordsGroup"/></property>
      <property name="index" value="30" />
   </bean>

   <bean id="rmMapEmailMetadataCapability"
      parent="declarativeCapability">
      <property name="name" value="MapEmailMetadata" />
      <property name="permission" value="MapEmailMetadata" />
      <property name="group"><ref bean="filePlanMetadataListsAndEmailGroup"/></property>
      <property name="index" value="90" />
   </bean>

   <bean id="rmPasswordControlCapability"
      parent="declarativeCapability">
      <property name="name" value="PasswordControl" />
      <property name="permission" value="PasswordControl" />
      <property name="group"><ref bean="rolesAndAccessRightsGroup"/></property>
      <property name="index" value="60" />
   </bean>

   <bean id="rmPlanningReviewCyclesCapability"
      parent="declarativeCapability" >
      <property name="name" value="PlanningReviewCycles"/>
      <property name="permission" value="PlanningReviewCycles"/>
      <property name="conditions">
         <map>
            <entry key="capabilityCondition.filling" value="true"/>
            <entry key="capabilityCondition.cutoff" value="false"/>
            <entry key="capabilityCondition.frozen" value="false"/>
            <entry key="capabilityCondition.vitalRecordOrFolder" value="true"/>
         </map>
      </property>
      <property name="group"><ref bean="vitalRecordsGroup"/></property>
      <property name="index" value="20" />
   </bean>

   <bean id="rmTriggerAnEventCapability"
      parent="declarativeCapability">
      <property name="name" value="TriggerAnEvent"/>
      <property name="permission" value="TriggerAnEvent"/>
      <property name="kinds">
         <list>
            <value>RECORD_FOLDER</value>
            <value>RECORD</value>
         </list>
      </property>
      <property name="conditions">
         <map>
            <entry key="capabilityCondition.filling" value="true"/>
            <entry key="capabilityCondition.frozen" value="false"/>
            <entry key="capabilityCondition.hasEvents" value="true"/>
         </map>
      </property>
      <property name="group"><ref bean="dispositionAndTransfersGroup"/></property>
      <property name="index" value="70" />
   </bean>

   <bean id="rmUpdateClassificationDatesCapability"
      parent="declarativeCapability">
      <property name="name" value="UpdateClassificationDates" />
      <property name="permission" value="UpdateClassificationDates" />
      <property name="group"><ref bean="classifiedRecordsGroup"/></property>
      <property name="index" value="40" />
   </bean>

   <bean id="rmUpdateExemptionCategoriesCapability"
      parent="declarativeCapability">
      <property name="name" value="UpdateExemptionCategories" />
      <property name="permission" value="UpdateExemptionCategories" />
      <property name="group"><ref bean="classifiedRecordsGroup"/></property>
      <property name="index" value="50" />
   </bean>

   <bean id="rmUpdateTriggerDatesCapability"
      parent="declarativeCapability">
      <property name="name" value="UpdateTriggerDates"/>
      <property name="permission" value="UpdateTriggerDates"/>
      <property name="conditions">
         <map>
            <entry key="capabilityCondition.frozen" value="false"/>
         </map>
      </property>
      <property name="group"><ref bean="dispositionAndTransfersGroup"/></property>
      <property name="index" value="80" />
   </bean>

   <bean id="rmUpdateVitalRecordCycleInformationCapability"
      parent="declarativeCapability">
      <property name="name" value="UpdateVitalRecordCycleInformation"/>
      <property name="permission" value="UpdateVitalRecordCycleInformation"/>
      <property name="conditions">
         <map>
            <entry key="capabilityCondition.frozen" value="false"/>
         </map>
      </property>
      <property name="group"><ref bean="vitalRecordsGroup"/></property>
      <property name="index" value="30" />
   </bean>

   <!-- Record Folder capabilities -->
   <import resource="classpath:alfresco/module/org_alfresco_module_rm/capability/rm-capabilities-recordfolder-context.xml"/>

   <!-- Record capabilities -->
   <import resource="classpath:alfresco/module/org_alfresco_module_rm/capability/rm-capabilities-record-context.xml"/>

   <!-- Freeze capabilities -->
   <import resource="classpath:alfresco/module/org_alfresco_module_rm/capability/rm-capabilities-freeze-context.xml"/>

   <!--  File Plan capabilities -->
   <import resource="classpath:alfresco/module/org_alfresco_module_rm/capability/rm-capabilities-fileplan-context.xml"/>

   <!-- Disposition capabilities -->
   <import resource="classpath:alfresco/module/org_alfresco_module_rm/capability/rm-capabilities-disposition-context.xml"/>

   <!-- Audit capabilities -->
   <import resource="classpath:alfresco/module/org_alfresco_module_rm/capability/rm-capabilities-audit-context.xml"/>

   <!-- List capabilities -->
   <import resource="classpath:alfresco/module/org_alfresco_module_rm/capability/rm-capabilities-list-context.xml"/>

   <!-- Group capabilities -->
   <import resource="classpath:alfresco/module/org_alfresco_module_rm/capability/rm-capabilities-group-context.xml"/>
   
   <!-- Rule capabilities -->
   <import resource="classpath:alfresco/module/org_alfresco_module_rm/capability/rm-capabilities-rule-context.xml"/>

</beans>